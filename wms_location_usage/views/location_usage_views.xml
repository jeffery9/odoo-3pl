<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- List View for Location Usage Analysis -->
    <record id="view_wms_location_usage_list" model="ir.ui.view">
        <field name="name">wms.location.usage.list</field>
        <field name="model">wms.location.usage</field>
        <field name="arch" type="xml">
            <list string="Location Usage Analysis" decoration-info="state=='draft'" decoration-success="state=='generated'" decoration-muted="state=='validated'">
                <field name="name"/>
                <field name="analysis_date"/>
                <field name="period_start"/>
                <field name="period_end"/>
                <field name="owner_id"/>
                <field name="warehouse_id"/>
                <field name="total_locations"/>
                <field name="usage_rate"/>
                <field name="capacity_usage_rate"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <!-- Form View for Location Usage Analysis -->
    <record id="view_wms_location_usage_form" model="ir.ui.view">
        <field name="name">wms.location.usage.form</field>
        <field name="model">wms.location.usage</field>
        <field name="arch" type="xml">
            <form string="Location Usage Analysis">
                <header>
                    <button name="action_generate_analysis"
                            string="Generate Analysis"
                            type="object"
                            class="oe_highlight"
                            invisible="state != 'draft'"
                            help="Generate location usage analysis based on the set period and conditions"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,generated,validated"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                    </div>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="analysis_date"/>
                            <field name="analysis_type"/>
                        </group>
                        <group>
                            <field name="owner_id"/>
                            <field name="warehouse_id"/>
                            <field name="period_start"/>
                            <field name="period_end"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Overall Statistics">
                            <group>
                                <group string="Location Statistics">
                                    <field name="total_locations"/>
                                    <field name="occupied_locations"/>
                                    <field name="empty_locations"/>
                                    <field name="usage_rate" widget="percentage"/>
                                    <field name="unused_locations"/>
                                </group>
                                <group string="Capacity Statistics">
                                    <field name="total_capacity"/>
                                    <field name="used_capacity"/>
                                    <field name="capacity_usage_rate" widget="percentage"/>
                                </group>
                            </group>
                        </page>

                        <page string="Efficiency Analysis">
                            <group>
                                <field name="high_usage_locations"/>
                                <field name="low_usage_locations"/>
                                <field name="turnover_rate"/>
                                <field name="avg_residence_time"/>
                            </group>
                        </page>

                        <page string="Analysis Results">
                            <field name="detailed_analysis" invisible="1"/>
                        </page>

                        <page string="Optimization Recommendations">
                            <field name="recommendations"/>
                        </page>

                        <page string="Statistics by Zone">
                            <field name="stats_by_zone"/>
                        </page>

                        <page string="Statistics by Category">
                            <field name="stats_by_category"/>
                        </page>

                        <page string="Usage Trends">
                            <field name="usage_trend"/>
                        </page>

                        <page string="Additional Information">
                            <field name="notes"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- List View for Location Utilization -->
    <record id="view_wms_location_utilization_list" model="ir.ui.view">
        <field name="name">wms.location.utilization.list</field>
        <field name="model">wms.location.utilization</field>
        <field name="arch" type="xml">
            <list string="Location Utilization Details" decoration-danger="efficiency_category=='low'" decoration-warning="efficiency_category=='medium'" decoration-success="efficiency_category=='high'" decoration-muted="efficiency_category=='unused'">
                <field name="location_name"/>
                <field name="zone_name"/>
                <field name="is_occupied"/>
                <field name="capacity"/>
                <field name="used_volume"/>
                <field name="usage_rate" widget="percentage"/>
                <field name="efficiency_category"/>
                <field name="turnover_frequency"/>
                <field name="owner_id"/>
            </list>
        </field>
    </record>

    <!-- Form View for Location Utilization -->
    <record id="view_wms_location_utilization_form" model="ir.ui.view">
        <field name="name">wms.location.utilization.form</field>
        <field name="model">wms.location.utilization</field>
        <field name="arch" type="xml">
            <form string="Location Utilization Details">
                <sheet>
                    <group>
                        <group>
                            <field name="location_name"/>
                            <field name="zone_name"/>
                            <field name="owner_id"/>
                            <field name="efficiency_category"/>
                        </group>
                        <group>
                            <field name="is_occupied"/>
                            <field name="usage_rate" widget="percentage"/>
                            <field name="turnover_frequency"/>
                        </group>
                    </group>
                    <group string="Capacity Information">
                        <field name="capacity"/>
                        <field name="used_volume"/>
                        <field name="used_weight"/>
                    </group>
                    <group string="Product Information">
                        <field name="product_count"/>
                        <field name="total_quantity"/>
                    </group>
                    <group string="Time Information">
                        <field name="first_used_date"/>
                        <field name="last_used_date"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Form View for Location Usage Report Wizard -->
    <record id="view_wms_location_usage_report_form" model="ir.ui.view">
        <field name="name">wms.location.usage.report.form</field>
        <field name="model">wms.location.usage.report</field>
        <field name="arch" type="xml">
            <form string="Generate Location Usage Report">
                <group>
                    <group>
                        <field name="period_start"/>
                        <field name="period_end"/>
                    </group>
                    <group>
                        <field name="owner_id"/>
                        <field name="warehouse_id"/>
                    </group>
                    <group>
                        <field name="analysis_type"/>
                    </group>
                </group>
                <footer>
                    <button name="action_generate_report"
                            string="Generate Report"
                            type="object"
                            class="btn-primary"/>
                    <button string="Cancel"
                            class="btn-secondary"
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Menu Items -->
    <menuitem id="menu_wms_location_usage_root"
              name="Location Usage Analysis"
              parent="wms_owner.menu_3pl_storage_reporting"
              sequence="35"/>

    <menuitem id="menu_wms_location_usage"
              name="Location Usage Analysis"
              parent="menu_wms_location_usage_root"
              action="wms_location_usage.action_wms_location_usage"
              sequence="10"/>

    <menuitem id="menu_wms_location_utilization"
              name="Location Utilization Details"
              parent="menu_wms_location_usage_root"
              action="wms_location_usage.action_wms_location_utilization"
              sequence="20"/>

    <menuitem id="menu_wms_location_usage_report"
              name="Generate New Analysis"
              parent="menu_wms_location_usage_root"
              action="wms_location_usage.action_wms_location_usage_report"
              sequence="30"/>

</odoo>