<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Extend Stock Quant Views for Inventory Age -->

    <!-- Add age fields to Stock Quant tree view -->
    <record id="view_stock_quant_tree_age" model="ir.ui.view">
        <field name="name">stock.quant.tree.age</field>
        <field name="model">stock.quant</field>
        <field name="inherit_id" ref="stock.view_stock_quant_tree"/>
        <field name="arch" type="xml">
            <field name="quantity" position="after">
                <field name="age_days" optional="show"/>
                <field name="aging_period" optional="show"/>
                <field name="is_aged_inventory" optional="show"/>
            </field>
        </field>
    </record>

    <!-- Add age fields to Stock Quant form view -->
    <record id="view_stock_quant_form_age" model="ir.ui.view">
        <field name="name">stock.quant.form.age</field>
        <field name="model">stock.quant</field>
        <field name="inherit_id" ref="stock.view_stock_quant_form"/>
        <field name="arch" type="xml">
            <group position="after">
                <group string="Age Information">
                    <field name="age_days"/>
                    <field name="aging_period"/>
                    <field name="is_aged_inventory"/>
                </group>
            </group>
        </field>
    </record>

    <!-- Add age filters to Stock Quant search view -->
    <record id="view_stock_quant_search_age" model="ir.ui.view">
        <field name="name">stock.quant.search.age</field>
        <field name="model">stock.quant</field>
        <field name="inherit_id" ref="stock.quant_search_view"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@expand='0']//filter[@name='productgroup']" position="after">
                <filter name="group_by_age_period" string="Aging Period" context="{'group_by': 'aging_period'}"/>
            </xpath>
            <xpath expr="//filter[@name='my_count']" position="after">
                <filter name="aged_inventory" string="Aged Inventory" domain="[('is_aged_inventory', '=', True)]"/>
                <filter name="current_inventory" string="Current Inventory" domain="[('aging_period', '=', 'current')]"/>
                <filter name="aged_30_60" string="30-60 Days" domain="[('aging_period', '=', '30_60')]"/>
                <filter name="aged_60_90" string="60-90 Days" domain="[('aging_period', '=', '60_90')]"/>
                <filter name="aged_90_180" string="90-180 Days" domain="[('aging_period', '=', '90_180')]"/>
                <filter name="aged_180_365" string="180-365 Days" domain="[('aging_period', '=', '180_365')]"/>
                <filter name="aged_over_365" string="Over 365 Days" domain="[('aging_period', '=', 'over_365')]"/>
            </xpath>
        </field>
    </record>
</odoo>